{% extends "main/base.html" %}
{% load static %}

{% block title %}Choose Your Academy Plan - MAJD{% endblock %}

{% block content %}
<section class="py-5 bg-light">
  <div class="container text-center mb-5">
    <!-- Progress -->
    <div class="progress-dashes mb-4">
      <div class="progress-dash completed"></div> <!-- Register -->
      <div class="progress-dash active"></div>    <!-- Subscribe -->
      <div class="progress-dash"></div>           <!-- Setup -->
    </div>

    <!-- Hero -->
    <h1 class="fw-bold mb-3" style="color:#138d68;">Grow Your Academy, Inspire More Players.</h1>
    <p class="lead text-muted mx-auto" style="max-width:650px;">
      Join our platform to showcase your academy programs. We’ll help you reach parents, players, 
      and communities by turning your offerings into beautiful, shareable academy cards.
    </p>

    <!-- Billing Toggle -->
    <div class="btn-group mt-4 mb-5" role="group">
      <a href="?billing=monthly" 
         class="btn {% if billing_type == 'monthly' %}btn-success{% else %}btn-outline-success{% endif %}">
        Monthly
      </a>
      <a href="?billing=yearly" 
         class="btn {% if billing_type == 'yearly' %}btn-success{% else %}btn-outline-success{% endif %}">
        Yearly <span class="badge bg-success ms-1">Save 17%</span>
      </a>
    </div>
  </div>

  <div class="container">
    <form method="post">
      {% csrf_token %}
      <div class="row justify-content-center g-4">

        {% for plan in plans %}
        <div class="col-md-4">
          <div class="card shadow-sm border-0 h-100 {% if plan.is_featured %}border-success{% endif %}" {% if plan.is_featured %}style="border-width:2px;"{% endif %}>
            <div class="card-body text-center p-4">
              <div class="mb-3">
                <i class="bi {{ plan.icon_class }} fs-1 {% if plan.is_featured %}text-success{% else %}text-primary{% endif %}"></i>
              </div>
              <h4 class="fw-bold">{{ plan.name }}</h4>
              <p class="text-muted">{{ plan.description }}</p>
              <h3 class="fw-bold mb-3" style="color:#138d68;">
                SAR {% if billing_type == "yearly" %}{{ plan.yearly_price }}{% else %}{{ plan.monthly_price }}{% endif %}
                <small class="fs-6 text-muted">/{{ billing_type }}</small>
              </h3>
              
              {% if plan.is_featured %}
                <span class="badge bg-success mb-3">Most Popular</span>
              {% endif %}

              <ul class="list-unstyled text-start mb-4">
                {% for feature in plan.features %}
                  <li>✅ {{ feature }}</li>
                {% endfor %}
              </ul>

              <button type="submit" name="plan_id" value="{{ plan.id }}" 
                      class="btn {% if plan.is_featured %}btn-success{% else %}btn-dark{% endif %} w-100">
                Get Started
              </button>
            </div>
          </div>
        </div>
        {% endfor %}

      </div>
    </form>
  </div>
</section>
{% endblock %}
