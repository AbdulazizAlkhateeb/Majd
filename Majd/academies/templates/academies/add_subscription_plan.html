{% extends "academies/base_dashboard.html" %}

{% block content %}
<div class="container d-flex justify-content-center py-5">
  <div class="col-lg-9">
    <div class="card shadow-sm border-0 rounded-4">
      <!-- Header -->
      <div class="card-header d-flex justify-content-between align-items-center"
           style="background:#f1fdf8; border-left:6px solid #138d68;">
        <div>
          <h5 class="mb-0 fw-bold" style="color:#138d68;">Add New Subscription Plan</h5>
          <small class="text-muted">Create a new subscription plan for your academy</small>
        </div>
        <a href="{% url 'academies:subscription_dashboard' %}" class="btn btn-outline-secondary">
          <i class="bi bi-arrow-left me-2"></i>Back to Subscriptions
        </a>
      </div>

      <!-- Body -->
      <div class="card-body p-4 p-md-5">
        <form method="post">
          {% csrf_token %}

          <div class="row g-3">
            <!-- Title -->
            <div class="col-12">
              <label for="{{ form.title.id_for_label }}" class="form-label fw-semibold"> {{ form.title.label }} </label>
              {{ form.title }}
              {% if form.title.errors %}
                <div class="text-danger small mt-1">
                  {% for error in form.title.errors %}<div>{{ error }}</div>{% endfor %}
                </div>
              {% endif %}
            </div>

            <!-- Plan Type -->
            <div class="col-md-6">
              <label for="{{ form.plan_type.id_for_label }}" class="form-label fw-semibold"> {{ form.plan_type.label }} </label>
              {{ form.plan_type }}
              {% if form.plan_type.errors %}
                <div class="text-danger small mt-1">
                  {% for error in form.plan_type.errors %}<div>{{ error }}</div>{% endfor %}
                </div>
              {% endif %}
            </div>

            <!-- Billing Type -->
            <div class="col-md-6">
              <label for="{{ form.billing_type.id_for_label }}" class="form-label fw-semibold"> {{ form.billing_type.label }} </label>
              {{ form.billing_type }}
              {% if form.billing_type.errors %}
                <div class="text-danger small mt-1">
                  {% for error in form.billing_type.errors %}<div>{{ error }}</div>{% endfor %}
                </div>
              {% endif %}
            </div>

            <!-- Price -->
            <div class="col-12">
              <label for="{{ form.price.id_for_label }}" class="form-label fw-semibold"> {{ form.price.label }} </label>
              <div class="input-group">
                <span class="input-group-text">SAR</span>
                {{ form.price }}
              </div>
              {% if form.price.errors %}
                <div class="text-danger small mt-1">
                  {% for error in form.price.errors %}<div>{{ error }}</div>{% endfor %}
                </div>
              {% endif %}
            </div>

            <!-- Description -->
            <div class="col-12">
              <label for="{{ form.description.id_for_label }}" class="form-label fw-semibold"> {{ form.description.label }} </label>
              {{ form.description }}
              {% if form.description.errors %}
                <div class="text-danger small mt-1">
                  {% for error in form.description.errors %}<div>{{ error }}</div>{% endfor %}
                </div>
              {% endif %}
            </div>

            <!-- Program Features -->
            <div class="col-12">
              <label for="{{ form.program_features.id_for_label }}" class="form-label fw-semibold"> {{ form.program_features.label }} </label>
              {{ form.program_features }}
              <small class="text-muted">
                Enter features separated by commas (e.g., <em>Skill Development, Teamwork Drills, Fitness Training</em>)
              </small>
              {% if form.program_features.errors %}
                <div class="text-danger small mt-1">
                  {% for error in form.program_features.errors %}<div>{{ error }}</div>{% endfor %}
                </div>
              {% endif %}
            </div>

            <!-- Active Status -->
            <div class="col-12">
              <div class="form-check">
                {{ form.is_active }}
                <label class="form-check-label fw-semibold" for="{{ form.is_active.id_for_label }}">
                  {{ form.is_active.label }}
                </label>
              </div>
              {% if form.is_active.errors %}
                <div class="text-danger small mt-1">
                  {% for error in form.is_active.errors %}<div>{{ error }}</div>{% endfor %}
                </div>
              {% endif %}
            </div>
          </div>

          <!-- Actions -->
          <div class="d-flex justify-content-end gap-2 mt-4">
            <a href="{% url 'academies:subscription_dashboard' %}" class="btn btn-secondary px-4">Cancel</a>
            <button type="submit" class="btn px-4" style="background:#138d68; color:#fff;">
              <i class="bi bi-check-lg me-2"></i>Create Plan
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<style>
  /* Labels */
  form label {
    font-weight: 600;
    color: #155d4a;
    margin-bottom: .35rem;
  }

  /* Inputs, selects, textareas */
  form input,
  form select,
  form textarea {
    width: 100%;
    border: 1px solid #d8efe4;
    border-radius: 8px;
    padding: 10px;
    font-size: .95rem;
    transition: border-color .2s ease, box-shadow .2s ease;
    background-color: #fff;
  }

  /* Input group to match */
  .input-group-text {
    border: 1px solid #d8efe4;
    background: #f8fffc;
    color: #0f5132;
    font-weight: 600;
    border-top-left-radius: 8px;
    border-bottom-left-radius: 8px;
  }
  .input-group > input {
    border-left: 0 !important;
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
  }

  /* Focus state */
  form input:focus,
  form select:focus,
  form textarea:focus {
    border-color: #138d68;
    outline: none;
    box-shadow: 0 0 0 0.2rem rgba(19,141,104,.12);
  }

  /* Textareas */
  textarea {
    min-height: 120px;
    resize: vertical;
  }

  /* Checkbox spacing */
  .form-check-input {
    border: 1px solid #d8efe4;
  }
  .form-check-input:focus {
    box-shadow: 0 0 0 0.2rem rgba(19,141,104,.12);
    border-color: #138d68;
  }
  .form-check-input:checked {
    background-color: #138d68;
    border-color: #138d68;
  }

  /* Card + buttons */
  .card { border-radius: 14px; }
  .btn { border-radius: 8px; font-weight: 600; }
</style>
{% endblock %}
